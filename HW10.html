<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-size: cover;

            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
        }

        .dashboard-heading {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 40px;
        }

        .dashboard-container {
            width: 50%;
            margin: auto;
            background-color: #dadfe9;
            padding: 20px;
            border-radius: 8px;
        }

        .visualization-section1 {
            width: 100%;
            height: 400px;
        }

        .visualization-section2 {
            flex-basis: 60%;
            height: 400px;
        }

        .visualization-section3 {
            width: 100%;
            height: 400px;
            margin-top: 5%;
        }

        .visualization-section4 {
            width: 100%;
            height: 400px;
        }


        .text-blocks-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: nowrap;
            padding: 0 20px;
            margin-top: 5%;
        }

        .text-block {
            width: 33.33%;
            box-sizing: border-box;
            margin: 0 10px;
        }

        .text-block-header {
            font-weight: bold;
            font-size: 1.5em;
        }

        .text-block p {
            font-size: 1.2em;
        }

        .dashboard-container p {
            font-size: 1.2em;
        }

        .text-blockTop10 {
            flex-basis: 40%;
            font-size: 1.2em;
            margin-top: 3%;
            margin-right: 3%;
        }

        .text-blockEnd {
            flex-basis: 40%;
            font-size: 1.2em;
            margin-right: 3%;
        }

        .row-container {
            width: 100%;
            display: flex;
            justify-content: space-between;
            /* or 'flex-start' if you want them to be aligned to the left */
            align-items: flex-start;
            /* aligns items to the top of the container */
        }

        .row-container1 {
            width: 100%;
            display: flex;
            justify-content: space-between;
            /* or 'flex-start' if you want them to be aligned to the left */
            align-items: flex-start;
            /* aligns items to the top of the container */
            margin-top: 5%;
        }

        .text-block4 {
            margin-top: 2%;
            font-size: 1.2em;
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <div id="vis1" class="visualization-section1"></div>



        <div class="row-container">
            <div id="vis2" class="visualization-section2"></div>
        </div>
    </div>
    <!-- Separate Scripts for Each Visualization -->
    <script>
        const spec1 = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "title": "COVID-19 Confirmed Cases",
                "width": 800,
                "height": 400,
                "background": "#dadfe9",
                "projection": {"type": "equalEarth"},
                "data": {
                    "url": "https://raw.githubusercontent.com/GREADISE/COVID-19Dataset/6675e4570693df9f808f00eac7fc9b3c16c1b9af/ne_110m_admin_0_countries.topojson",
                    "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
                },
                "transform": [
                    {
                    "lookup": "properties.NAME",
                    "from": {
                        "data": {
                        "url": "https://raw.githubusercontent.com/GREADISE/COVID-19Dataset/main/country_wise_latest.csv"
                        },
                        "key": "Country/Region",
                        "fields": ["Confirmed", "Deaths", "Recovered"]
                    }
                    },
                    {
                    "calculate": "isValid(datum.Confirmed) ? datum.Confirmed : 0",
                    "as": "Confirmed"
                    },
                    {"calculate": "isValid(datum.Deaths) ? datum.Deaths : 0", "as": "Deaths"},
                    {
                    "calculate": "isValid(datum.Recovered) ? datum.Recovered : 0",
                    "as": "Recovered"
                    }
                ],
                "mark": {"type": "geoshape"},
                "encoding": {
                    "color": {
                    "condition": {"test": "datum.Confirmed == 0", "value": "purple"},
                    "field": "Confirmed",
                    "type": "quantitative",
                    "scale": {"type": "log", "domain": [1, 10000000], "scheme": "plasma"},
                    "legend": {"title": "Confirmed Cases"}
                    },
                    "tooltip": [
                    {"field": "properties.NAME", "type": "nominal", "title": "Country"},
                    {"field": "Confirmed", "type": "quantitative"},
                    {"field": "Deaths", "type": "quantitative"},
                    {"field": "Recovered", "type": "quantitative"}
                    ]
                },
                "config": {}
                };
        vegaEmbed("#vis1", spec1, { mode: "vega-lite" }).then(console.log).catch(console.warn);
    </script>

    <script>
        const spec2 = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Top 10 Countries by Confirmed COVID-19 Cases",
            "width": "container",
            "height": "container",
            "background": "#dadfe9",
            "data": {
                "url": "https://raw.githubusercontent.com/GREADISE/COVID-19Dataset/main/country_wise_latest.csv"
            },
            "transform": [
                { "calculate": "toNumber(datum.Confirmed)", "as": "Confirmed_Num" },
                {
                    "sort": [{ "field": "Confirmed_Num", "order": "descending" }],
                    "window": [{ "op": "row_number", "as": "rank" }]
                },
                { "filter": "datum.rank <= 10" }
            ],
            "layer": [
                {
                    "mark": "bar",
                    "encoding": {
                        "y": {
                            "field": "Country/Region",
                            "type": "ordinal",
                            "title": "Country/Region",
                            "sort": "-x"
                        },
                        "x": {
                            "field": "Confirmed",
                            "type": "quantitative",
                            "title": "Confirmed Cases"
                        },
                        "tooltip": [
                            {
                                "field": "Country/Region",
                                "type": "ordinal"
                            },
                            {
                                "field": "Confirmed",
                                "type": "quantitative",
                                "title": "Confirmed Cases"
                            }
                        ]
                    }
                }
            ],
            "config": {
                "axis": { "labelFontSize": 12, "titleFontSize": 14 },
                "title": { "fontSize": 16 }
            }
        };
        vegaEmbed("#vis2", spec2, { mode: "vega-lite" }).then(console.log).catch(console.warn);
    </script>

</body>

</html>